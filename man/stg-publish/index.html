<!DOCTYPE html>
<html><head>
    <title>
         stg-publish(1) &ndash;  Stacked Git
    </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="msapplication-TileColor" content="#603cba">
    <meta name="theme-color" content="#ffffff">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="stylesheet" href="/css/stgit.css">
    <link rel="stylesheet" href="/css/chroma.css">
</head>
<body>
        <div><header>
  
  <a href="/">
    <img src="/stgit.svg" alt="Stacked Git logo">
  </a>
  
  <h3><a href="/">Stacked Git</a></h3>
  <nav>
    <ul>
      
      <li>
        <a href="/changelog/">
          
          Changelog
          
        </a>
      </li>
      
      <li>
        <a href="/man/">
          
          Man Pages
          
        </a>
      </li>
      
      <li>
        <a href="/guides/">
          
          Guides
          
        </a>
      </li>
      
      <li>
        <a href="/guides/tutorial/">
          
          Tutorial
          
        </a>
      </li>
      
      <li>
        <a href="https://github.com/stacked-git/stgit/">
          
          Repository
          <img src="/github.svg" alt="GitHub logo">
        </a>
      </li>
      
      <li>
        <a href="https://github.com/stacked-git/stgit/issues">
          
          Issue Tracker
          <img src="/github.svg" alt="GitHub logo">
        </a>
      </li>
      
      <li>
        <a href="https://github.com/stacked-git/stgit/releases">
          
          Releases
          <img src="/github.svg" alt="GitHub logo">
        </a>
      </li>
      
      <li>
        <a href="https://groups.google.com/d/forum/stgit">
          
          Forum
          <img src="/ext-link.svg" alt="external link">
        </a>
      </li>
      
    </ul>
  </nav>
</header>
<div>
<main>
  <h2>
    <a href="/man/stg-publish/">
      stg-publish(1)
    </a>
  </h2>






<div class="sect1">
<h2 id="_name">NAME</h2>
<div class="sectionbody">
<div class="paragraph">
<p>stg-publish - (DEPRECATED) Push the stack changes to a merge-friendly branch</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>stg publish</em> [options] [--] [branch]</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DEPRECATED: The <em>stg publish</em> command will be removed in a future version of
StGit.</p>
</div>
<div class="paragraph">
<p>This command commits a set of changes on a separate (called public) branch
based on the modifications of the given or current stack. The history of the
public branch is not re-written, making it merge-friendly and feasible for
publishing. The heads of the stack and public branch may be different but the
corresponding tree objects are always the same.</p>
</div>
<div class="paragraph">
<p>If the trees of the stack and public branch are different (otherwise the
command has no effect), StGit first checks for a rebase of the stack since the
last publishing. If a rebase is detected, StGit creates a commit on the public
branch corresponding to a merge between the new stack base and the latest
public head.</p>
</div>
<div class="paragraph">
<p>If no rebasing was detected, StGit checks for new patches that may have been
created on top of the stack since the last publishing. If new patches are
found and are not empty, they are checked into the public branch keeping the
same commit information (e.g. log message, author, committer, date).</p>
</div>
<div class="paragraph">
<p>If the above tests fail (e.g. patches modified or removed), StGit creates a
new commit on the public branch having the same tree as the stack but the
public head as its parent. The editor will be invoked if no &#34;--message&#34; option
is given.</p>
</div>
<div class="paragraph">
<p>It is recommended that stack modifications falling in different categories as
described above are separated by a publish command in order to keep the public
branch history cleaner (otherwise StGit would generate a big commit including
several stack modifications).</p>
</div>
<div class="paragraph">
<p>The <em>--unpublished</em> option can be used to check if there are applied patches
that have not been published to the public branch. This is done by trying to
revert the patches in the public tree (similar to the <em>push --merged</em>
detection). The <em>--last</em> option tries to find the last published patch by
checking the SHA1 of the patch tree agains the public tree. This may fail if
the stack was rebased since the last publish command.</p>
</div>
<div class="paragraph">
<p>The public branch name can be set via the branch.&lt;branch&gt;.public configuration
variable (defaulting to &#34;&lt;branch&gt;.public&#34;).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options">OPTIONS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">-b BRANCH</dt>
<dt class="hdlist1">--branch BRANCH</dt>
<dd>
<p>Use BRANCH instead of the default branch.</p>
</dd>
<dt class="hdlist1">-l</dt>
<dt class="hdlist1">--last</dt>
<dd>
<p>Show the last published patch.</p>
</dd>
<dt class="hdlist1">-u</dt>
<dt class="hdlist1">--unpublished</dt>
<dd>
<p>Show applied patches that have not been published.</p>
</dd>
<dt class="hdlist1">--overwrite</dt>
<dd>
<p>Overwrite branch instead of creating new commits.</p>
</dd>
<dt class="hdlist1">--author &#34;NAME &lt;EMAIL&gt;&#34;</dt>
<dd>
<p>Set the author details.</p>
</dd>
<dt class="hdlist1">--authname NAME</dt>
<dd>
<p>Set the author name.</p>
</dd>
<dt class="hdlist1">--authemail EMAIL</dt>
<dd>
<p>Set the author email.</p>
</dd>
<dt class="hdlist1">--authdate DATE</dt>
<dd>
<p>Set the author date.</p>
</dd>
<dt class="hdlist1">-m MESSAGE</dt>
<dt class="hdlist1">--message MESSAGE</dt>
<dd>
<p>Use MESSAGE instead of invoking the editor.</p>
</dd>
<dt class="hdlist1">-f FILE</dt>
<dt class="hdlist1">--file FILE</dt>
<dd>
<p>Use the contents of FILE instead of invoking the editor.
(If FILE is &#34;-&#34;, write to stdout.)</p>
</dd>
<dt class="hdlist1">--sign</dt>
<dd>
<p>Add a &#34;Signed-off-by:&#34; to the end of the patch.</p>
</dd>
<dt class="hdlist1">--ack</dt>
<dd>
<p>Add an &#34;Acked-by:&#34; line to the end of the patch.</p>
</dd>
<dt class="hdlist1">--review</dt>
<dd>
<p>Add a &#34;Reviewed-by:&#34; line to the end of the patch.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stgit">StGit</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part of the StGit suite - see <a href="/man/stg">stg(1)</a></p>
</div>
</div>
</div>

</main>
<footer>
  <small>&copy; 2021 Stacked Git Authors</small>
</footer>
</div>
        </div>
    </body>
</html>
